[build]
command = """
  git submodule update --init --recursive &&
  hugo --minify
"""

[build.environment]
GO_VERSION = "1.21.3"
HUGO_VERSION = "0.120.4"

[context.deploy-preview]
command = """
  git submodule update --init --recursive &&
  hugo --minify --gc -b $DEPLOY_PRIME_URL
"""

[[redirects]]
  from = "/docs/reference/*"
  to = "/docs/latest/kluctl/reference/:splat"
[[redirects]]
  from = "/docs/concepts"
  to = "/docs/latest/kluctl/concepts"
[[redirects]]
  from = "/docs/get-started"
  to = "/docs/latest/kluctl/get-started"
[[redirects]]
  from = "/docs/history"
  to = "/docs/latest/kluctl/history"
[[redirects]]
  from = "/docs/installation"
  to = "/docs/latest/kluctl/installation"
[[redirects]]
  from = "/docs/philosophy"
  to = "/docs/latest/kluctl/philosophy"

[[redirects]]
  from = "/docs/flux/*"
  to = "/docs/gitops"

[[redirects]]
  from = "/docs/kluctl/concepts"
  to = "/docs/latest/kluctl"
[[redirects]]
  from = "/docs/kluctl/history"
  to = "/docs/latest/kluctl"
[[redirects]]
  from = "/docs/kluctl/philosophy"
  to = "/docs/latest/kluctl"

[[redirects]]
  from = "/docs/kluctl/reference/gitops/*"
  to = "/docs/latest/gitops/:splat"
[[redirects]]
  from = "/docs/kluctl/reference/*"
  to = "/docs/latest/kluctl/:splat"

[[redirects]]
  from = "/docs/kluctl/commands/*"
  to = "/docs/latest/kluctl/commands/:splat"
[[redirects]]
  from = "/docs/kluctl/deployments/*"
  to = "/docs/latest/kluctl/deployments/:splat"
[[redirects]]
  from = "/docs/kluctl/kluctl-libraries/*"
  to = "/docs/latest/kluctl/kluctl-libraries/:splat"
[[redirects]]
  from = "/docs/kluctl/kluctl-project/*"
  to = "/docs/latest/kluctl/kluctl-project/:splat"
[[redirects]]
  from = "/docs/kluctl/templating/*"
  to = "/docs/latest/kluctl/templating/:splat"
